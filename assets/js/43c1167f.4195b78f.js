"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[8502],{4841:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/block-placements-b8a046581021a67549777dd7a2fb2a48.png"},22116:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"basics/update-voxels","title":"Update Voxels","description":"Modify voxels by raycasting to find which block the player is looking at.","source":"@site/docs/tutorials/basics/12-update-voxels.md","sourceDirName":"basics","slug":"/basics/update-voxels","permalink":"/tutorials/basics/update-voxels","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":12,"frontMatter":{"sidebar_position":12},"sidebar":"tutorialSidebar","previous":{"title":"Debug UI","permalink":"/tutorials/basics/debug-ui"},"next":{"title":"Perspectives and Visuals","permalink":"/tutorials/basics/perspectives-and-visuals"}}');var i=t(62540),a=t(43023);const l={sidebar_position:12},r="Update Voxels",c={},o=[{value:"Setup Voxel Interaction",id:"setup-voxel-interaction",level:2},{value:"Add a Crosshair",id:"add-a-crosshair",level:2},{value:"Break Blocks",id:"break-blocks",level:2},{value:"Place Blocks",id:"place-blocks",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",mermaid:"mermaid",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"update-voxels",children:"Update Voxels"})}),"\n",(0,i.jsx)(n.p,{children:"Modify voxels by raycasting to find which block the player is looking at."}),"\n",(0,i.jsx)(n.mermaid,{value:"flowchart LR\n    C[Camera] --\x3e|raycast| R[Ray]\n    R --\x3e|intersects| T[Target Block]\n    R -.->|adjacent| P[Potential Position]\n\n    T --\x3e|left click| B[Break: set to 0]\n    P --\x3e|right click| PL[Place: set to block type]\n\n    style T fill:#ef4444,stroke:#dc2626,stroke-width:2px\n    style P fill:#10b981,stroke:#059669,stroke-width:2px,stroke-dasharray: 5 5\n    style C fill:#4a9eff,stroke:#2563eb"}),"\n",(0,i.jsxs)(n.p,{children:["Voxelize uses a fast ray-voxel intersection algorithm based on ",(0,i.jsx)(n.a,{href:"http://www.cse.yorku.ca/~amana/research/grid.pdf",children:"this paper"}),"."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:t(94748).A+"",width:"501",height:"223"})}),"\n",(0,i.jsx)(n.h2,{id:"setup-voxel-interaction",children:"Setup Voxel Interaction"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",metastring:'title="main.js"',children:'const voxelInteract = new VOXELIZE.VoxelInteract(camera, world, {\n  highlightType: "outline",\n});\n\nworld.add(voxelInteract);\n\nfunction animate() {\n  requestAnimationFrame(animate);\n\n  if (world.isInitialized) {\n    world.update(\n      camera.getWorldPosition(new THREE.Vector3()),\n      camera.getWorldDirection(new THREE.Vector3())\n    );\n\n    rigidControls.update();\n    voxelInteract.update();\n  }\n\n  renderer.render(world, camera);\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"add-a-crosshair",children:"Add a Crosshair"}),"\n",(0,i.jsxs)(n.p,{children:["Update ",(0,i.jsx)(n.code,{children:"index.html"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-html",metastring:'title="index.html"',children:'<div id="app">\n  <canvas id="canvas"></canvas>\n  <div id="crosshair"></div>\n</div>\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Update ",(0,i.jsx)(n.code,{children:"style.css"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-css",metastring:'title="style.css"',children:"#crosshair {\n  width: 12px;\n  height: 12px;\n  border: 2px solid #fff3;\n  border-radius: 6px;\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:t(63798).A+"",width:"2560",height:"1440"})}),"\n",(0,i.jsx)(n.h2,{id:"break-blocks",children:"Break Blocks"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",metastring:'title="main.js"',children:'inputs.click("left", () => {\n  if (!voxelInteract.target) return;\n\n  const [x, y, z] = voxelInteract.target;\n  world.updateVoxel(x, y, z, 0);\n});\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Block type ",(0,i.jsx)(n.code,{children:"0"})," is air - setting a voxel to 0 removes it."]}),"\n",(0,i.jsx)(n.h2,{id:"place-blocks",children:"Place Blocks"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",metastring:'title="main.js"',children:'let holdingBlockType = 1;\n\ninputs.click("middle", () => {\n  if (!voxelInteract.target) return;\n\n  const [x, y, z] = voxelInteract.target;\n  holdingBlockType = world.getVoxelAt(x, y, z);\n});\n\ninputs.click("right", () => {\n  if (!voxelInteract.potential) return;\n\n  const { voxel } = voxelInteract.potential;\n  world.updateVoxel(...voxel, holdingBlockType);\n});\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"voxelInteract.target"})," - The block you're looking at"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"voxelInteract.potential"})," - The adjacent block position (where a new block would be placed)"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:t(4841).A+"",width:"2560",height:"1440"})}),"\n",(0,i.jsx)(n.p,{children:"Controls:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Left click: Break block"}),"\n",(0,i.jsx)(n.li,{children:"Middle click: Pick block type"}),"\n",(0,i.jsx)(n.li,{children:"Right click: Place block"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},43023:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>r});var s=t(63696);const i={},a=s.createContext(i);function l(e){const n=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),s.createElement(a.Provider,{value:n},e.children)}},63798:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/voxel-interact-1f2489de90f51a954a806ef2ed8d0f07.png"},94748:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/raycast-8c7b421be865967f053f189c73bc1cf6.png"}}]);