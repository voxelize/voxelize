"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3687],{43023:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>o});var i=s(63696);const r={},t=i.createContext(r);function l(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(t.Provider,{value:n},e.children)}},92096:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"blocks/chunk-meshing","title":"Chunk Meshing","description":"Chunk meshing transforms raw voxel data into renderable 3D geometry. Understanding how meshes are built helps you customize the visual appearance of your world.","source":"@site/docs/wiki/blocks/chunk-meshing.md","sourceDirName":"blocks","slug":"/blocks/chunk-meshing","permalink":"/wiki/blocks/chunk-meshing","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Block Textures","permalink":"/wiki/blocks/block-textures"},"next":{"title":"Custom Block Rendering","permalink":"/wiki/blocks/custom-block-rendering"}}');var r=s(62540),t=s(43023);const l={sidebar_position:3},o="Chunk Meshing",c={},d=[{value:"The Meshing Pipeline",id:"the-meshing-pipeline",level:2},{value:"Customizing Appearance",id:"customizing-appearance",level:2},{value:"Ambient Occlusion",id:"ambient-occlusion",level:3},{value:"Lighting",id:"lighting",level:3},{value:"Fog",id:"fog",level:3},{value:"Example: Stylized Dungeon",id:"example-stylized-dungeon",level:2},{value:"Server Configuration",id:"server-configuration",level:2},{value:"Transparent Blocks",id:"transparent-blocks",level:2},{value:"Related Pages",id:"related-pages",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"chunk-meshing",children:"Chunk Meshing"})}),"\n",(0,r.jsx)(n.p,{children:"Chunk meshing transforms raw voxel data into renderable 3D geometry. Understanding how meshes are built helps you customize the visual appearance of your world."}),"\n",(0,r.jsx)(n.h2,{id:"the-meshing-pipeline",children:"The Meshing Pipeline"}),"\n",(0,r.jsx)(n.mermaid,{value:"graph LR\n    A[Voxel Data] --\x3e B[Face Culling]\n    B --\x3e C[Vertex Generation]\n    C --\x3e D[AO + Light Baking]\n    D --\x3e E[Sub-Chunk Geometry]\n    E --\x3e F[Client Rendering]"}),"\n",(0,r.jsx)(n.p,{children:"The server handles steps A-E, sending compressed geometry to clients. The client reconstructs geometry and applies textures."}),"\n",(0,r.jsx)(n.h2,{id:"customizing-appearance",children:"Customizing Appearance"}),"\n",(0,r.jsx)(n.p,{children:"All visual properties are controlled through chunk uniforms. You can set them at initialization or modify them at runtime:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",metastring:'title="Chunk Uniform Configuration"',children:'import * as VOXELIZE from "@voxelize/core";\nimport { Vector4, Color } from "three";\n\nconst world = new VOXELIZE.World({\n  chunkUniformsOverwrite: {\n    ao: { value: new Vector4(100, 170, 210, 255) },\n    sunlightIntensity: { value: 1.0 },\n    minLightLevel: { value: 0.04 },\n    lightIntensityAdjustment: { value: 0.8 },\n    fogColor: { value: new Color("#B1CCFD") },\n    fogNear: { value: 100 },\n    fogFar: { value: 200 },\n  },\n});\n'})}),"\n",(0,r.jsx)(n.h3,{id:"ambient-occlusion",children:"Ambient Occlusion"}),"\n",(0,r.jsx)(n.p,{children:"AO darkens corners where blocks meet, adding depth. Each vertex gets an AO level (0-3) based on neighboring blocks:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Level"}),(0,r.jsx)(n.th,{children:"Neighbors Blocking"}),(0,r.jsx)(n.th,{children:"Effect"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"0"}),(0,r.jsx)(n.td,{children:"Both sides + corner"}),(0,r.jsx)(n.td,{children:"Darkest"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"1"}),(0,r.jsx)(n.td,{children:"Two neighbors"}),(0,r.jsx)(n.td,{children:"Dark"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"2"}),(0,r.jsx)(n.td,{children:"One neighbor"}),(0,r.jsx)(n.td,{children:"Subtle"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"3"}),(0,r.jsx)(n.td,{children:"None"}),(0,r.jsx)(n.td,{children:"No darkening"})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"ao"})," uniform maps these levels to brightness values (0-255):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",metastring:'title="AO Customization"',children:"world.chunks.uniforms.ao.value.set(80, 150, 200, 255); // dramatic shadows\nworld.chunks.uniforms.ao.value.set(200, 220, 240, 255); // subtle shadows\nworld.chunks.uniforms.ao.value.set(255, 255, 255, 255); // disable AO\n"})}),"\n",(0,r.jsx)(n.h3,{id:"lighting",children:"Lighting"}),"\n",(0,r.jsx)(n.p,{children:"Three uniforms control light rendering:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Uniform"}),(0,r.jsx)(n.th,{children:"Default"}),(0,r.jsx)(n.th,{children:"Purpose"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"sunlightIntensity"})}),(0,r.jsx)(n.td,{children:"1.0"}),(0,r.jsx)(n.td,{children:"Multiplier for sky light (0 = night)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"minLightLevel"})}),(0,r.jsx)(n.td,{children:"0.04"}),(0,r.jsx)(n.td,{children:"Ambient brightness floor"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"lightIntensityAdjustment"})}),(0,r.jsx)(n.td,{children:"0.8"}),(0,r.jsx)(n.td,{children:"Overall light scaling"})]})]})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",metastring:'title="Night Mode"',children:"world.chunks.uniforms.sunlightIntensity.value = 0.1;\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Day/night transitions happen automatically based on ",(0,r.jsx)(n.code,{children:"sunlightStartTimeFrac"}),", ",(0,r.jsx)(n.code,{children:"sunlightEndTimeFrac"}),", and ",(0,r.jsx)(n.code,{children:"sunlightChangeSpan"})," world options."]}),"\n",(0,r.jsx)(n.h3,{id:"fog",children:"Fog"}),"\n",(0,r.jsx)(n.p,{children:"Fog blends distant chunks with the sky. Distance is calculated horizontally (XZ plane) for consistent depth perception:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",metastring:'title="Fog Control"',children:'world.chunks.uniforms.fogNear.value = 50; // start blending\nworld.chunks.uniforms.fogFar.value = 120; // fully fogged\nworld.chunks.uniforms.fogColor.value.set("#ff9966"); // sunset\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Fog scales automatically with render radius: ",(0,r.jsx)(n.code,{children:"fogNear = radius * 0.7 * chunkSize"}),", ",(0,r.jsx)(n.code,{children:"fogFar = radius * chunkSize"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"example-stylized-dungeon",children:"Example: Stylized Dungeon"}),"\n",(0,r.jsx)(n.p,{children:"This example creates a dark, dramatic dungeon aesthetic:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",metastring:'title="Dungeon Style Configuration"',children:'import * as VOXELIZE from "@voxelize/core";\nimport { Vector4, Color } from "three";\n\nconst world = new VOXELIZE.World({\n  minLightLevel: 0.02,\n  chunkUniformsOverwrite: {\n    ao: { value: new Vector4(40, 100, 160, 255) },\n    sunlightIntensity: { value: 0.3 },\n    lightIntensityAdjustment: { value: 1.2 },\n    fogColor: { value: new Color("#1a1a2e") },\n    fogNear: { value: 30 },\n    fogFar: { value: 80 },\n  },\n});\n'})}),"\n",(0,r.jsxs)(n.p,{children:["The strong AO values (starting at 40) create deep shadows in corners, while low sunlight and close fog create an oppressive atmosphere. Boosted ",(0,r.jsx)(n.code,{children:"lightIntensityAdjustment"})," makes torches pop against the darkness."]}),"\n",(0,r.jsx)(n.h2,{id:"server-configuration",children:"Server Configuration"}),"\n",(0,r.jsx)(n.p,{children:"The server controls mesh generation throughput:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-rust",metastring:'title="Mesher Configuration"',children:"let config = WorldConfig::new()\n    .max_chunks_per_tick(4)  // chunks meshed per tick\n    .sub_chunks(8)           // vertical subdivisions\n    .build();\n"})}),"\n",(0,r.jsx)(n.p,{children:"More sub-chunks means better frustum culling but more draw calls. For 256-block tall chunks:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:".sub_chunks(4)"})," - 64-block sections, fewer draws"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:".sub_chunks(8)"})," - 32-block sections, balanced"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:".sub_chunks(16)"})," - 16-block sections, aggressive culling"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"transparent-blocks",children:"Transparent Blocks"}),"\n",(0,r.jsxs)(n.p,{children:["Blocks with ",(0,r.jsx)(n.code,{children:"is_transparent"})," or ",(0,r.jsx)(n.code,{children:"is_see_through"})," have special face generation rules:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Faces render between different transparent types"}),"\n",(0,r.jsxs)(n.li,{children:["Same-type faces only render if ",(0,r.jsx)(n.code,{children:"transparent_standalone"})," is true (useful for leaves)"]}),"\n",(0,r.jsx)(n.li,{children:"AABB intersection determines visibility for partial blocks"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"related-pages",children:"Related Pages"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/wiki/blocks/block-registry",children:"Block Registry"})," - Server-side block configuration"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/wiki/blocks/block-textures",children:"Block Textures"})," - Client-side texture application"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/wiki/blocks/custom-block-rendering",children:"Custom Block Rendering"})," - Block entity rendering"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}}}]);