"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[9992],{43023:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>r});var a=t(63696);const s={},o=a.createContext(s);function l(e){const n=a.useContext(o);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),a.createElement(o.Provider,{value:n},e.children)}},86423:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>r,default:()=>h,frontMatter:()=>l,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"intermediate/chat-and-colored-text","title":"Chat and Colored Text","description":"Voxelize provides a chat system for player communication and a colored text utility for styled text rendering.","source":"@site/docs/tutorials/intermediate/10-chat-and-colored-text.md","sourceDirName":"intermediate","slug":"/intermediate/chat-and-colored-text","permalink":"/tutorials/intermediate/chat-and-colored-text","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"sidebar_position":10},"sidebar":"tutorialSidebar","previous":{"title":"Method Handling","permalink":"/tutorials/intermediate/method-handling"},"next":{"title":"Protocol Networking","permalink":"/tutorials/intermediate/protocol-networking"}}');var s=t(62540),o=t(43023);const l={sidebar_position:10},r="Chat and Colored Text",i={},d=[{value:"Chat System",id:"chat-system",level:2},{value:"Client Setup",id:"client-setup",level:3},{value:"Sending Messages",id:"sending-messages",level:3},{value:"Receiving Messages",id:"receiving-messages",level:3},{value:"Chat UI Example",id:"chat-ui-example",level:3},{value:"Server-Side Chat",id:"server-side-chat",level:2},{value:"Handling Chat",id:"handling-chat",level:3},{value:"Command Symbol",id:"command-symbol",level:3},{value:"Colored Text",id:"colored-text",level:2},{value:"ColorText Utility",id:"colortext-utility",level:3},{value:"Color Codes",id:"color-codes",level:3},{value:"ColorText Options",id:"colortext-options",level:3},{value:"Dynamic Updates",id:"dynamic-updates",level:3},{value:"SpriteText",id:"spritetext",level:2},{value:"Name Tags",id:"name-tags",level:2},{value:"Example: Chat with Roles",id:"example-chat-with-roles",level:2},{value:"Example: Floating Damage Numbers",id:"example-floating-damage-numbers",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"chat-and-colored-text",children:"Chat and Colored Text"})}),"\n",(0,s.jsx)(n.p,{children:"Voxelize provides a chat system for player communication and a colored text utility for styled text rendering."}),"\n",(0,s.jsx)(n.h2,{id:"chat-system",children:"Chat System"}),"\n",(0,s.jsx)(n.h3,{id:"client-setup",children:"Client Setup"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",metastring:'title="Chat Setup"',children:'import * as VOXELIZE from "@voxelize/core";\n\nconst chat = new VOXELIZE.Chat();\n\nnetwork.register(chat);\n'})}),"\n",(0,s.jsx)(n.h3,{id:"sending-messages",children:"Sending Messages"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",metastring:'title="Sending Chat"',children:'chat.send("player-name", "Hello everyone!");\n'})}),"\n",(0,s.jsx)(n.h3,{id:"receiving-messages",children:"Receiving Messages"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",metastring:'title="Receiving Chat"',children:"chat.onChat = (message) => {\n  const { sender, body } = message;\n  console.log(`${sender}: ${body}`);\n  addToUI(sender, body);\n};\n"})}),"\n",(0,s.jsx)(n.h3,{id:"chat-ui-example",children:"Chat UI Example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",metastring:'title="Chat UI Integration"',children:'const chatInput = document.getElementById("chat-input") as HTMLInputElement;\nconst chatMessages = document.getElementById("chat-messages");\n\nchatInput.addEventListener("keydown", (e) => {\n  if (e.key === "Enter" && chatInput.value.trim()) {\n    chat.send(username, chatInput.value);\n    chatInput.value = "";\n  }\n});\n\nchat.onChat = (message) => {\n  const div = document.createElement("div");\n  div.innerHTML = `<strong>${message.sender}:</strong> ${message.body}`;\n  chatMessages.appendChild(div);\n  chatMessages.scrollTop = chatMessages.scrollHeight;\n};\n'})}),"\n",(0,s.jsx)(n.h2,{id:"server-side-chat",children:"Server-Side Chat"}),"\n",(0,s.jsx)(n.h3,{id:"handling-chat",children:"Handling Chat"}),"\n",(0,s.jsx)(n.p,{children:"Chat messages are broadcast to all clients by default. To intercept:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-rust",metastring:'title="Chat Handling"',children:'// Chat messages trigger on_chat internally\n// They\'re automatically broadcast unless handled\n\n// For commands, use the command handler:\nworld.set_command_handle(|world, client_id, command| {\n    // command is the message without the command prefix\n    // e.g., "/spawn bot" becomes "spawn bot"\n});\n'})}),"\n",(0,s.jsx)(n.h3,{id:"command-symbol",children:"Command Symbol"}),"\n",(0,s.jsx)(n.p,{children:"Configure the command prefix in world config:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-rust",metastring:'title="Command Prefix"',children:'let config = WorldConfig::new()\n    .command_symbol("/")  // Default is "/"\n    .build();\n'})}),"\n",(0,s.jsx)(n.h2,{id:"colored-text",children:"Colored Text"}),"\n",(0,s.jsx)(n.h3,{id:"colortext-utility",children:"ColorText Utility"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"ColorText"})," renders text with inline color codes:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",metastring:'title="ColorText Usage"',children:'import * as VOXELIZE from "@voxelize/core";\n\nVOXELIZE.ColorText.SPLITTER = "$";\n\nconst coloredText = new VOXELIZE.ColorText({\n  text: "$red$Hello $blue$World",\n});\n\nscene.add(coloredText);\n'})}),"\n",(0,s.jsx)(n.h3,{id:"color-codes",children:"Color Codes"}),"\n",(0,s.jsx)(n.p,{children:"Use the splitter character to change colors:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"$red$This is red $green$this is green $#FF00FF$this is magenta\n"})}),"\n",(0,s.jsx)(n.p,{children:"Supported formats:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Named colors: ",(0,s.jsx)(n.code,{children:"$red$"}),", ",(0,s.jsx)(n.code,{children:"$blue$"}),", ",(0,s.jsx)(n.code,{children:"$green$"}),", etc."]}),"\n",(0,s.jsxs)(n.li,{children:["Hex colors: ",(0,s.jsx)(n.code,{children:"$#FF0000$"}),", ",(0,s.jsx)(n.code,{children:"$#00FF00$"})]}),"\n",(0,s.jsxs)(n.li,{children:["RGB: ",(0,s.jsx)(n.code,{children:"$rgb(255,0,0)$"})]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"colortext-options",children:"ColorText Options"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",metastring:'title="ColorText Options"',children:'const text = new VOXELIZE.ColorText({\n  text: "$white$Player Name",\n  fontSize: 48,\n  fontFace: "Arial",\n  backgroundColor: "rgba(0,0,0,0.5)",\n  yOffset: 0.5,\n});\n'})}),"\n",(0,s.jsx)(n.h3,{id:"dynamic-updates",children:"Dynamic Updates"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",metastring:'title="Updating ColorText"',children:'const nameTag = new VOXELIZE.ColorText({\n  text: "$green$Healthy",\n});\n\nfunction updateHealth(health: number) {\n  if (health > 50) {\n    nameTag.text = "$green$Healthy";\n  } else if (health > 25) {\n    nameTag.text = "$yellow$Wounded";\n  } else {\n    nameTag.text = "$red$Critical";\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"spritetext",children:"SpriteText"}),"\n",(0,s.jsx)(n.p,{children:"For simpler text without colors:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",metastring:'title="SpriteText"',children:'const label = new VOXELIZE.SpriteText("Hello World", {\n  fontSize: 32,\n  color: "white",\n  backgroundColor: "transparent",\n});\n\nlabel.position.set(0, 2, 0);\nscene.add(label);\n'})}),"\n",(0,s.jsx)(n.h2,{id:"name-tags",children:"Name Tags"}),"\n",(0,s.jsx)(n.p,{children:"Characters have built-in name tags:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",metastring:'title="Character Name Tags"',children:'const character = new VOXELIZE.Character({\n  nameTagOptions: {\n    fontFace: "monospace",\n    fontSize: 32,\n    yOffset: 0.2,\n  },\n});\n\ncharacter.username = "$red$Admin $white$PlayerName";\n'})}),"\n",(0,s.jsx)(n.h2,{id:"example-chat-with-roles",children:"Example: Chat with Roles"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",metastring:'title="Role-Based Chat Colors"',children:'type Role = "admin" | "mod" | "player";\n\nconst roleColors: Record<Role, string> = {\n  admin: "#FF0000",\n  mod: "#00FF00",\n  player: "#FFFFFF",\n};\n\nfunction formatMessage(role: Role, name: string, message: string): string {\n  const color = roleColors[role];\n  return `$${color}$[${role.toUpperCase()}] ${name}: $white$${message}`;\n}\n\nchat.onChat = (msg) => {\n  const role = getUserRole(msg.sender);\n  const formatted = formatMessage(role, msg.sender, msg.body);\n  displayMessage(formatted);\n};\n'})}),"\n",(0,s.jsx)(n.h2,{id:"example-floating-damage-numbers",children:"Example: Floating Damage Numbers"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",metastring:'title="Damage Numbers"',children:'function showDamage(position: THREE.Vector3, damage: number) {\n  const color = damage > 50 ? "red" : damage > 25 ? "orange" : "yellow";\n\n  const text = new VOXELIZE.SpriteText(`-${damage}`, {\n    fontSize: 48,\n    color,\n  });\n\n  text.position.copy(position);\n  text.position.y += 1;\n\n  world.add(text);\n\n  const startY = text.position.y;\n  const animate = () => {\n    text.position.y += 0.02;\n    text.material.opacity -= 0.02;\n\n    if (text.material.opacity > 0) {\n      requestAnimationFrame(animate);\n    } else {\n      world.remove(text);\n    }\n  };\n\n  animate();\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Read on to learn about ",(0,s.jsx)(n.a,{href:"./protocol-networking",children:"protocol networking"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}}}]);