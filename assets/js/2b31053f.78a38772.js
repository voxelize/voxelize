"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6949],{2064:(n,e,t)=>{t.d(e,{A:()=>o});const o=t.p+"assets/images/rigid-controls-basic-31f004fa9e2264bc9838c630ec3ce902.png"},23533:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>s,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"basics/player-control","title":"Player Control","description":"RigidControls handles walking, running, jumping, flying, and collision detection. It wraps ThreeJS\'s PointerLockControls.","source":"@site/docs/tutorials/basics/10-player-control.md","sourceDirName":"basics","slug":"/basics/player-control","permalink":"/tutorials/basics/player-control","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"sidebar_position":10},"sidebar":"tutorialSidebar","previous":{"title":"Apply Textures","permalink":"/tutorials/basics/texturing-blocks"},"next":{"title":"Debug UI","permalink":"/tutorials/basics/debug-ui"}}');var r=t(62540),i=t(43023);const s={sidebar_position:10},a="Player Control",l={},d=[{value:"Setup Controls",id:"setup-controls",level:2},{value:"Update Loop",id:"update-loop",level:2},{value:"Add Fly and Ghost Mode",id:"add-fly-and-ghost-mode",level:2},{value:"Full Code",id:"full-code",level:2}];function c(n){const e={code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"player-control",children:"Player Control"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"RigidControls"})," handles walking, running, jumping, flying, and collision detection. It wraps ThreeJS's PointerLockControls."]}),"\n",(0,r.jsx)(e.h2,{id:"setup-controls",children:"Setup Controls"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",metastring:'title="main.js"',children:"const inputs = new VOXELIZE.Inputs();\n\nconst rigidControls = new VOXELIZE.RigidControls(\n  camera,\n  renderer.domElement,\n  world,\n  {\n    initialPosition: [0, 40, 0],\n  }\n);\n\nrigidControls.connect(inputs);\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"connect"})," registers default movement keys (WASD, Space, Shift)."]}),"\n",(0,r.jsx)(e.h2,{id:"update-loop",children:"Update Loop"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",metastring:'title="main.js"',children:"function animate() {\n  requestAnimationFrame(animate);\n\n  if (world.isInitialized) {\n    world.update(\n      camera.getWorldPosition(new THREE.Vector3()),\n      camera.getWorldDirection(new THREE.Vector3())\n    );\n\n    rigidControls.update();\n  }\n\n  renderer.render(world, camera);\n}\n"})}),"\n",(0,r.jsx)(e.p,{children:"Click the canvas to lock the pointer and start moving:"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{src:t(2064).A+"",width:"2560",height:"1440"})}),"\n",(0,r.jsx)(e.h2,{id:"add-fly-and-ghost-mode",children:"Add Fly and Ghost Mode"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",metastring:'title="main.js"',children:'inputs.bind("g", rigidControls.toggleGhostMode);\ninputs.bind("f", rigidControls.toggleFly);\n'})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["Press ",(0,r.jsx)(e.code,{children:"F"})," to toggle flying"]}),"\n",(0,r.jsxs)(e.li,{children:["Press ",(0,r.jsx)(e.code,{children:"G"})," to toggle ghost mode (no-clip)"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"full-code",children:"Full Code"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-javascript",metastring:'title="main.js"',children:'import * as VOXELIZE from "@voxelize/core";\nimport * as THREE from "three";\n\nconst canvas = document.getElementById("canvas");\n\nconst world = new VOXELIZE.World({\n  textureUnitDimension: 16,\n});\n\nconst camera = new THREE.PerspectiveCamera(\n  75,\n  window.innerWidth / window.innerHeight,\n  0.1,\n  3000\n);\n\nconst renderer = new THREE.WebGLRenderer({\n  antialias: true,\n  powerPreference: "high-performance",\n  canvas,\n});\nrenderer.setSize(window.innerWidth, window.innerHeight);\nrenderer.setPixelRatio(window.devicePixelRatio || 1);\nrenderer.outputColorSpace = THREE.SRGBColorSpace;\n\nwindow.addEventListener("resize", () => {\n  camera.aspect = window.innerWidth / window.innerHeight;\n  camera.updateProjectionMatrix();\n  renderer.setSize(window.innerWidth, window.innerHeight);\n});\n\nconst network = new VOXELIZE.Network();\nnetwork.register(world);\n\nconst inputs = new VOXELIZE.Inputs();\n\nconst rigidControls = new VOXELIZE.RigidControls(\n  camera,\n  renderer.domElement,\n  world,\n  {\n    initialPosition: [0, 40, 0],\n  }\n);\n\nrigidControls.connect(inputs);\n\ninputs.bind("g", rigidControls.toggleGhostMode);\ninputs.bind("f", rigidControls.toggleFly);\n\nfunction animate() {\n  requestAnimationFrame(animate);\n\n  if (world.isInitialized) {\n    world.update(\n      camera.getWorldPosition(new THREE.Vector3()),\n      camera.getWorldDirection(new THREE.Vector3())\n    );\n\n    rigidControls.update();\n  }\n\n  renderer.render(world, camera);\n}\n\nasync function start() {\n  animate();\n\n  await network.connect("http://localhost:4000");\n  await network.join("tutorial");\n\n  await world.initialize();\n\n  world.sky.setShadingPhases([\n    {\n      name: "sunrise",\n      color: {\n        top: new THREE.Color("#7694CF"),\n        middle: new THREE.Color("#B0483A"),\n        bottom: new THREE.Color("#222"),\n      },\n      skyOffset: 0.05,\n      voidOffset: 0.6,\n      start: 0.2,\n    },\n    {\n      name: "daylight",\n      color: {\n        top: new THREE.Color("#73A3FB"),\n        middle: new THREE.Color("#B1CCFD"),\n        bottom: new THREE.Color("#222"),\n      },\n      skyOffset: 0,\n      voidOffset: 0.6,\n      start: 0.25,\n    },\n    {\n      name: "sunset",\n      color: {\n        top: new THREE.Color("#A57A59"),\n        middle: new THREE.Color("#FC5935"),\n        bottom: new THREE.Color("#222"),\n      },\n      skyOffset: 0.05,\n      voidOffset: 0.6,\n      start: 0.7,\n    },\n    {\n      name: "night",\n      color: {\n        top: new THREE.Color("#000"),\n        middle: new THREE.Color("#000"),\n        bottom: new THREE.Color("#000"),\n      },\n      skyOffset: 0.1,\n      voidOffset: 0.6,\n      start: 0.75,\n    },\n  ]);\n\n  world.sky.paint("bottom", VOXELIZE.artFunctions.drawSun());\n  world.sky.paint("top", VOXELIZE.artFunctions.drawStars());\n  world.sky.paint("top", VOXELIZE.artFunctions.drawMoon());\n  world.sky.paint("sides", VOXELIZE.artFunctions.drawStars());\n\n  const allFaces = ["px", "nx", "py", "ny", "pz", "nz"];\n  await world.applyBlockTexture("Dirt", allFaces, "/blocks/dirt.png");\n  await world.applyBlockTexture("Stone", allFaces, "/blocks/stone.png");\n  await world.applyBlockTexture(\n    "Grass Block",\n    ["px", "pz", "nx", "nz"],\n    "/blocks/grass_side.png"\n  );\n  await world.applyBlockTexture("Grass Block", "py", "/blocks/grass_top.png");\n  await world.applyBlockTexture("Grass Block", "ny", "/blocks/dirt.png");\n}\n\nstart();\n'})}),"\n",(0,r.jsx)(e.p,{children:"This matches the code in the tutorial repository."})]})}function p(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(c,{...n})}):c(n)}},43023:(n,e,t)=>{t.d(e,{R:()=>s,x:()=>a});var o=t(63696);const r={},i=o.createContext(r);function s(n){const e=o.useContext(i);return o.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:s(n.components),o.createElement(i.Provider,{value:e},n.children)}}}]);